// Global default params, used in configs
workDir = "analysis"

params {

  // Boilerplate options
  help = false

  // cache option makes it a bit easier to set conda or singularity cacheDir
  cache = ''
}

includeConfig 'config/base.config'

process {
    withLabel: retry_increasing_mem {
       errorStrategy = { task.exitStatus in 137..140 ? 'retry' : 'terminate' }
       memory = {8.GB * task.attempt}
       maxRetries = 3
    }

    withLabel: retry_later {
        errorStrategy { sleep(Math.pow(2, task.attempt) * 200 as long); return 'retry' }
        maxRetries 5
    }

    withLabel: retry_increasing_mem_later {
        errorStrategy { sleep(Math.pow(2, task.attempt) * 200 as long); return 'retry' }
        memory = {8.GB * task.attempt}
        maxRetries = 5
    }
}

